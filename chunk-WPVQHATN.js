import{b as W,c as X,d as Y}from"./chunk-UJJ5RPSO.js";import{a as V}from"./chunk-CAK3OBX6.js";import{a as nt,b as rt}from"./chunk-DA6VBTJK.js";import"./chunk-DAWCWIAJ.js";import{a as O,b as z,c as j,f as G,g as H}from"./chunk-3DNGTUDU.js";import"./chunk-VNWETEOL.js";import{c as $,d as A}from"./chunk-NMQYYX3J.js";import{a as N}from"./chunk-GHM2WVFT.js";import{a as it,b as ot}from"./chunk-C6WDXVJE.js";import{b as tt,f as et}from"./chunk-PXB6PWFU.js";import{b as L,f as Z,j as J,m as K,u as U}from"./chunk-OF6GP2AS.js";import{a as pt}from"./chunk-MNPMLYZV.js";import"./chunk-3IDDBSHN.js";import{F as b,Ha as d,Ja as c,Ka as Q,La as S,Ma as f,Na as _,Oa as u,Ob as B,Pa as n,Qa as r,Ra as C,Rb as D,S as l,V as I,W as q,Wa as k,Ya as T,Zb as P,_a as m,ca as y,ma as a,mb as s,n as v,nb as F,ob as g,tb as E,ua as w,ub as R,y as M}from"./chunk-WL6JEFOM.js";import{e as mt,g as x}from"./chunk-WR2VUDLS.js";var st=mt(pt());function lt(e,i){e&1&&(C(0,"mat-spinner",7),s(1," Importing... "))}function dt(e,i){if(e&1&&s(0),e&2){let t=m(2);g(" Import ",t.length," questions ")}}function ct(e,i){if(e&1&&(n(0,"mat-radio-button",8),s(1),r()),e&2){let t=i.$implicit;u("value",t),a(),F(t)}}function ut(e,i){if(e&1&&(n(0,"mat-card",6)(1,"mat-card-header")(2,"mat-card-title"),s(3),r()(),n(4,"mat-card-content")(5,"mat-radio-group"),f(6,ct,2,2,"mat-radio-button",8,S),r()()()),e&2){let t=i.$implicit;a(3),g(" ",t.question," "),a(3),_(t.options)}}function ft(e,i){if(e&1){let t=k();n(0,"h1"),s(1,"Output "),n(2,"button",4),T("click",function(){I(t);let p=m(2);return q(p.import())}),d(3,lt,2,0)(4,dt,1,1),r()(),n(5,"div",5),f(6,ut,8,1,"mat-card",6,Q),r()}if(e&2){let t=m(),o=m();a(2),u("disabled",o.isImporting()),a(),c(o.isImporting()?3:4),a(3),_(t)}}function _t(e,i){e&1&&d(0,ft,8,2),e&2&&c(i.length>0?0:-1)}var at=class e{quiz=l(N);activatedRoute=l(P);snackbar=l(V);id=this.activatedRoute.parent?.snapshot.paramMap.get("id");control=new J("");isImporting=y(!1);parsedQuestions=[];questions$=this.control.valueChanges.pipe(M(500),v(()=>{if((0,st.isEmpty)(this.control.value))return[];let i=this.control.value?.replace(/\n/g," ").split(/(?=\b\d{1,2}\b\.)/);return this.parsedQuestions=i?.map(t=>new h(t)),this.parsedQuestions}),b(1));import(){return x(this,null,function*(){let i=this.parsedQuestions?.filter(t=>t.question&&t.question.trim()!=="")?.map(t=>({question:t.question.trim(),answers:t.options.filter(o=>o&&o.trim()!=="").map(o=>({text:o.trim()}))}))?.filter(t=>t.answers.length>0);if(!i||i.length===0){this.snackbar.open("No valid questions to import","Close",{duration:3e3});return}this.isImporting.set(!0);try{yield this.quiz.addQuestion(this.id,i),this.control.reset(""),this.snackbar.open(`Successfully imported ${i.length} questions`,"Close",{duration:3e3})}catch(t){console.error("Failed to import questions:",t),this.snackbar.open("Failed to import questions. Please try again.","Close",{duration:5e3})}finally{this.isImporting.set(!1)}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=w({type:e,selectors:[["app-question-import"]],decls:11,vars:4,consts:[[1,"row"],[1,"column"],["appearance","fill",2,"width","100%"],["matInput","","rows","30",3,"formControl"],["mat-button","","appearance","filled","color","primary",3,"click","disabled"],[2,"max-height","80vh","overflow","scroll"],[2,"margin-bottom","1rem"],["diameter","20"],[3,"value"]],template:function(t,o){if(t&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),s(3,"Raw questions"),r(),n(4,"mat-form-field",2)(5,"mat-label"),s(6,"Raw questions"),r(),C(7,"textarea",3),r()(),n(8,"div",1),d(9,_t,1,1),E(10,"async"),r()()),t&2){let p;a(7),u("formControl",o.control),a(2),c((p=R(10,2,o.questions$))?9:-1,p)}},dependencies:[H,O,j,G,z,ot,it,et,tt,U,L,Z,K,Y,W,X,D,A,$,rt,nt,B],styles:[".row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;width:100%;gap:2rem;margin-top:2rem}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-basis:100%;flex:1}"],changeDetection:0})},h=class{question;options;constructor(i){let t=i.split(/(?=[A-Z]\.)/);this.question=t[0],this.options=t.slice(1,t.length)}};export{at as QuestionImportComponent,h as QuestionModel};
