// Essential animations for quiz interactions
@keyframes progress-shine {
  0%, 100% { opacity: 0; }
  50% { opacity: 1; }
}

@keyframes badge-pulse {
  0%, 100% { 
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }
  50% { 
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3), 0 0 20px rgba(var(--mat-sys-primary-rgb), 0.3);
  }
}

@keyframes badge-success {
  0% { transform: scale(1.1); }
  50% { transform: scale(1.3); }
  100% { transform: scale(1.15); }
}

@keyframes badge-shake {
  0%, 100% { transform: scale(1.1) translateX(0); }
  25% { transform: scale(1.1) translateX(-3px); }
  75% { transform: scale(1.1) translateX(3px); }
}

@keyframes unanswered-pulse {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 0.8; }
}

// Essential custom styles that can't be replicated with Tailwind
:host {
  display: block;
}

// Quiz header styling
.quiz-header {
  background: linear-gradient(145deg, var(--mat-sys-surface-container-lowest), var(--mat-sys-surface-container));
  border: 1px solid var(--mat-sys-outline-variant);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  
  .quiz-title {
    color: var(--mat-sys-on-surface);
    
    .bank-name {
      color: var(--mat-sys-primary);
      
      &:hover {
        color: var(--mat-sys-tertiary);
        text-decoration: underline;
      }
    }
  }
  
  .quiz-subtitle {
    color: var(--mat-sys-on-surface-variant);
  }
  
  .progress-text {
    color: var(--mat-sys-on-surface);
  }
  
  .accuracy-text {
    color: var(--mat-sys-tertiary);
    background: var(--mat-sys-tertiary-container);
  }
  
  .progress-bar {
    background: var(--mat-sys-surface-container-high);
    border-color: var(--mat-sys-outline-variant);
    
    .progress-fill {
      background: linear-gradient(90deg, var(--mat-sys-primary), var(--mat-sys-tertiary));
    }
  }
}

// Progress bar shine effect
.progress-fill {
  &::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    width: 2px;
    background: rgba(255, 255, 255, 0.6);
    animation: progress-shine 2s infinite;
  }
}

// Floating question number badge states
.floating-question-number {
  background: var(--mat-sys-primary);
  color: var(--mat-sys-on-primary);
  border-color: var(--mat-sys-surface);
  
  &.unanswered {
    background: var(--mat-sys-outline);
    color: var(--mat-sys-surface);
    animation: badge-pulse 2s infinite;
  }
  
  &.answered {
    background: var(--mat-sys-primary);
    color: var(--mat-sys-on-primary);
    transform: scale(1.1);
  }
  
  &.correct {
    background: var(--mat-sys-tertiary);
    color: var(--mat-sys-on-tertiary);
    transform: scale(1.15);
    animation: badge-success 0.6s ease-out;
  }
  
  &.incorrect {
    background: var(--mat-sys-error);
    color: var(--mat-sys-on-error);
    transform: scale(1.1);
    animation: badge-shake 0.6s ease-out;
  }
}

// Question card states
.question-card {
  .question-text {
    color: var(--mat-sys-on-surface);
  }
  
  .no-answer-warning {
    color: var(--mat-sys-error);
  }
  
  &.unanswered {
    border-color: var(--mat-sys-outline-variant);
    
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--mat-sys-primary), transparent);
      opacity: 0.3;
      animation: unanswered-pulse 3s infinite;
    }
  }
  
  &.answered {
    border-color: var(--mat-sys-primary);
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
  }
  
  &.correct {
    border-color: var(--mat-sys-tertiary);
    background: linear-gradient(145deg, var(--mat-sys-surface), var(--mat-sys-tertiary-container));
  }
  
  &.incorrect {
    border-color: var(--mat-sys-error);
    background: linear-gradient(145deg, var(--mat-sys-surface), var(--mat-sys-error-container));
  }
  
  &:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
  }
}

// Answer card states
.answer-card {
  border-color: var(--mat-sys-outline-variant);
  background: var(--mat-sys-surface-container-lowest);
  
  .answer-label {
    background: var(--mat-sys-outline);
    color: var(--mat-sys-surface);
  }
  
  .answer-text {
    color: var(--mat-sys-on-surface);
  }
  
  .selected-icon {
    color: var(--mat-sys-primary);
  }
  
  .unselected-icon {
    color: var(--mat-sys-outline);
  }
  
  &:hover {
    border-color: var(--mat-sys-primary);
    background: var(--mat-sys-primary-container);
    transform: translateX(4px);
  }
  
  &.selected {
    border-color: var(--mat-sys-primary);
    background: var(--mat-sys-primary-container);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  
  &.correct-answer {
    border-color: var(--mat-sys-tertiary);
    background: var(--mat-sys-tertiary-container);
    color: var(--mat-sys-on-tertiary-container);
    
    .answer-label {
      background: var(--mat-sys-tertiary);
      color: var(--mat-sys-on-tertiary);
    }
  }
  
  &.user-incorrect {
    border-color: var(--mat-sys-error);
    background: var(--mat-sys-error-container);
    color: var(--mat-sys-on-error-container);
    
    .answer-label {
      background: var(--mat-sys-error);
      color: var(--mat-sys-on-error);
    }
  }
  
  &.disabled {
    cursor: not-allowed;
    pointer-events: none;
    
    &:not(.selected):not(.correct-answer):not(.user-incorrect) {
      opacity: 0.6;
      background: var(--mat-sys-surface-container-lowest);
      border-color: var(--mat-sys-outline-variant);
      
      .answer-label {
        opacity: 0.7;
      }
      
      .answer-text {
        opacity: 0.7;
      }
    }
    
    &:hover {
      border-color: inherit;
      background: inherit;
      transform: none;
    }
  }
}

// No questions content styling
.no-questions-content {
  mat-icon {
    color: var(--mat-sys-on-surface-variant);
  }
  
  h3 {
    color: var(--mat-sys-on-surface);
  }
  
  p {
    color: var(--mat-sys-on-surface-variant);
  }
}

// Stats section styling
.stats {
  background: var(--mat-sys-surface-container);
  border-color: var(--mat-sys-outline-variant);
  
  .correct {
    color: var(--mat-sys-tertiary);
  }
  
  .incorrect {
    color: var(--mat-sys-error);
  }
}

// Light theme specific overrides for correct answers
:host {
  html.light-theme & {
    --mat-sys-tertiary: #10b981;
    --mat-sys-on-tertiary: #ffffff;
    --mat-sys-tertiary-container: #10b98125;
    --mat-sys-on-tertiary-container: #065f46;
  }
  
  body.light-theme & {
    --mat-sys-tertiary: #10b981;
    --mat-sys-on-tertiary: #ffffff;
    --mat-sys-tertiary-container: #10b98125;
    --mat-sys-on-tertiary-container: #065f46;
  }
}

// Additional light theme overrides for elements that need explicit colors
.question-card.correct {
  html.light-theme & {
    border-color: #10b981 !important;
    background: linear-gradient(145deg, var(--mat-sys-surface), #10b98115) !important;
  }
  
  body.light-theme & {
    border-color: #10b981 !important;
    background: linear-gradient(145deg, var(--mat-sys-surface), #10b98115) !important;
  }
}

.answer-card.correct-answer {
  html.light-theme & {
    border-color: #10b981 !important;
    background: #10b98125 !important;
    color: #065f46 !important;
    
    .answer-label {
      background: #10b981 !important;
      color: white !important;
    }
  }
  
  body.light-theme & {
    border-color: #10b981 !important;
    background: #10b98125 !important;
    color: #065f46 !important;
    
    .answer-label {
      background: #10b981 !important;
      color: white !important;
    }
  }
}

.floating-question-number.correct {
  html.light-theme & {
    background: #10b981 !important;
    color: white !important;
  }
  
  body.light-theme & {
    background: #10b981 !important;
    color: white !important;
  }
}